<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Desempenho Estatístico</title>
  <link rel="stylesheet" href="../css/navbar.css">
  <link rel="stylesheet" href="../css/dashboard_desempenhoEstat.css">
  <script src="../scripts/redirecionamentoMenu.js"></script>
  <script src="../scripts/animacaoMenuMobile.js"></script>
  <link rel="icon" href="../assets/img/logoSentinela.ico" type="image/x-icon">
</head>

<body>
  <!-- MENU LATERAL-->
  <div class="container_navDashRT" id="container_navDashRT"></div>

  <!-- MENU SUPERIOR MOBILE-->
  <div class="navBar-mobile" id="navBar-mobile"></div>

  <!-- SCRIPT QUE GERA O CONTEUDO DOS MENUS -->
  <script src="../scripts/redirecionamentoMenu.js"></script>

  <div class="dashboard">
    <div class="container">
      <h1>Desempenho Estatístico</h1>
      <div class="seletor">
        <select id="slt_modelo">
          <option value="#" disabled>Selecione o Modelo</option>
          <option value="1" selected>Modelo 1</option>
          <option value="2">Modelo 2</option>
          <option value="3">Modelo 3</option>
        </select>
        <select id="slt_periodo">
          <option value="#" disabled>Selecione o Periodo</option>
          <option value="1" selected>1 Ano</option>
          <option value="2">6 Meses</option>
          <option value="3">3 Meses</option>
        </select>
      </div>
    </div>

    <div class="container">
      <h3>Desempenho Geral por Componente</h3>
      <div class="desempenhoGeral">
        <div class="kpicontainer">
          <div class="kpi">
            <div class="kpiBox">
              <h3>CPU</h3>
              <div class="titulo">
                <span>Eficiência (%)</span>
              </div>
              <div class="metrica" id="met_efiCPU">0</div>
            </div>
            <div class="kpiBox">
              <div class="titulo">
                <span>Sobrecarga (%)</span>
              </div>
              <div class="metrica" id="met_sobreCPU">0</div>
            </div>
          </div>

          <div class="kpi">
            <div class="kpiBox">
              <h3>RAM</h3>
              <div class="titulo">
                <span>Eficiência (%)</span>
              </div>
              <div class="metrica" id="met_efiRAM">0</div>
            </div>
            <div class="kpiBox">
              <div class="titulo">
                <span>Sobrecarga (%)</span>
              </div>
              <div class="metrica" id="met_sobreRAM">0</div>
            </div>
          </div>

          <div class="kpi">
            <div class="kpiBox">
              <h3>Bateria</h3>
              <div class="titulo">
                <span>Eficiência (%)</span>
              </div>
              <div class="metrica" id="met_efiBateria">0</div>
            </div>
            <div class="kpiBox">
              <div class="titulo">
                <span>Sobrecarga (%)</span>
              </div>
              <div class="metrica" id="met_sobreBateria">0</div>
            </div>
          </div>

          <div class="kpi">
            <div class="kpiBox">
              <h3>Rede</h3>
              <div class="titulo">
                <span>Eficiência (%)</span>
              </div>
              <div class="metrica" id="met_efiRede">0</div>
            </div>
            <div class="kpiBox">
              <div class="titulo">
                <span>Sobrecarga (%)</span>
              </div>
              <div class="metrica" id="met_sobreRede">0</div>
            </div>
          </div>

          <div class="kpi">
            <div class="kpiBox">
              <h3>Disco</h3>
              <div class="titulo">
                <span>Eficiência (%)</span>
              </div>
              <div class="metrica" id="met_efiCPU">0</div>
            </div>
            <div class="kpiBox">
              <div class="titulo">
                <span>Sobrecarga (%)</span>
              </div>
              <div class="metrica" id="met_sobreCPU">0</div>
            </div>
          </div>
        </div>
        <div class="legenda">
          <div>Considerando o tempo de uso do componente sobre o tempo em estado de alerta e a quantidade
            de alertas.</div>
          <div>De acordo com as vezes que ficou inoperante (desligou) em estado de alerta.</div>
        </div>
      </div>
    </div>

    <!-- Métricas de desempenho dos componentes e gráficos -->
    <div class="container">
      <h3 id="comp_CPU">CPU</h3>
      <div class="desempenhoComponente">
        <div class="kpisComponente">
          <div class="kpiBox">
            <div class="titulo">
              <span>Média de Consumo(%)</span>
            </div>
            <div class="kpiContent">
              <div class="conjunto">
                <div class="tipometrica"><span>Esperado</span></div>
                <div class="metrica" id="met-esp_CPU">0</div>
              </div>
              <div class="conjunto">
                <div class="tipometrica"><span>Atingido</span></div>
                <div class="metrica" id="met-ati_CPU">0</div>
              </div>
            </div>
          </div>

          <div class="kpiBox">
            <div class="titulo">
              <span>Média de Consumo Máximo(%)</span>
            </div>
            <div class="kpiContent">
              <div class="conjunto">
                <div class="tipometrica"><span>Esperado</span></div>
                <div class="metrica" id="met-esp_CPU">0</div>
              </div>
              <div class="conjunto">
                <div class="tipometrica"><span>Atingido</span></div>
                <div class="metrica" id="met-ati_CPU">0</div>
              </div>
            </div>
          </div>
        </div>
      <div class="grafDesempenho" id="graf_CPU">
        <canvas id="myChart"></canvas>
      </div>
    </div>

    <div class="container">
      <h3 id="comp_RAM">RAM</h3>
      <div class="desempenhoComponente">
        <div class="kpisComponente">
          <div class="kpiBox">
            <div class="titulo">
              <span>Média de Consumo(%)</span>
            </div>
            <div class="kpiContent">
              <div class="conjunto">
                <div class="tipometrica"><span>Esperado</span></div>
                <div class="metrica" id="met-esp_RAM">0</div>
              </div>
              <div class="conjunto">
                <div class="tipometrica"><span>Atingido</span></div>
                <div class="metrica" id="met-ati_RAM">0</div>
              </div>
            </div>
          </div>

          <div class="kpiBox">
            <div class="titulo">
              <span>Média de Consumo Máximo(%)</span>
            </div>
            <div class="kpiContent">
              <div class="conjunto">
                <div class="tipometrica"><span>Esperado</span></div>
                <div class="metrica" id="met-esp_RAM">0</div>
              </div>
              <div class="conjunto">
                <div class="tipometrica"><span>Atingido</span></div>
                <div class="metrica" id="met-ati_RAM">0</div>
              </div>
            </div>
          </div>
        </div>
        <div class="grafDesempenho" id="graf_Ram">
          <canvas id="l"></canvas>
        </div>
      </div>
    </div>

    <div class="container">
      <h3 id="comp_Rede">Rede</h3>
      <div class="desempenhoComponente">
        <div class="kpisComponente">
          <div class="kpiBox">
            <div class="titulo">
              <span>Média de Consumo(%)</span>
            </div>
            <div class="kpiContent">
              <div class="conjunto">
                <div class="tipometrica"><span>Esperado</span></div>
                <div class="metrica" id="met-esp_Rede">0</div>
              </div>
              <div class="conjunto">
                <div class="tipometrica"><span>Atingido</span></div>
                <div class="metrica" id="met-ati_Rede">0</div>
              </div>
            </div>
          </div>

          <div class="kpiBox">
            <div class="titulo">
              <span>Média de Consumo Máximo(%)</span>
            </div>
            <div class="kpiContent">
              <div class="conjunto">
                <div class="tipometrica"><span>Esperado</span></div>
                <div class="metrica" id="met-esp_Rede">0</div>
              </div>
              <div class="conjunto">
                <div class="tipometrica"><span>Atingido</span></div>
                <div class="metrica" id="met-ati_Rede">0</div>
              </div>
            </div>
          </div>
        </div>
        <div class="grafDesempenho" id="graf_Rede">
          <canvas id="l"></canvas>
        </div>
      </div>

      <div class="container">
        <h3 id="comp_Bateria">Bateria</h3>
        <div class="desempenhoComponente">
          <div class="kpisComponente">
            <div class="kpiBox">
              <div class="titulo">
                <span>Média de Consumo(%)</span>
              </div>
              <div class="kpiContent">
                <div class="conjunto">
                  <div class="tipometrica"><span>Esperado</span></div>
                  <div class="metrica" id="met-esp_Bateria">0</div>
                </div>
                <div class="conjunto">
                  <div class="tipometrica"><span>Atingido</span></div>
                  <div class="metrica" id="met-ati_Bateria">0</div>
                </div>
              </div>
            </div>

            <div class="kpiBox">
              <div class="titulo">
                <span>Média de Consumo Máximo(%)</span>
              </div>
              <div class="kpiContent">
                <div class="conjunto">
                  <div class="tipometrica"><span>Esperado</span></div>
                  <div class="metrica" id="met-esp_Bateria">0</div>
                </div>
                <div class="conjunto">
                  <div class="tipometrica"><span>Atingido</span></div>
                  <div class="metrica" id="met-ati_Bateria">0</div>
                </div>
              </div>
            </div>
          </div>
          <div class="grafDesempenho" id="graf_Bateria">
            <canvas id="l"></canvas>
          </div>
        </div>

        <div class="container">
          <h3 id="comp_Disco">Disco</h3>
          <div class="desempenhoComponente">
            <div class="kpisComponente">
              <div class="kpiBox">
                <div class="titulo">
                  <span>Média de Consumo(%)</span>
                </div>
                <div class="kpiContent">
                  <div class="conjunto">
                    <div class="tipometrica"><span>Esperado</span></div>
                    <div class="metrica" id="met-esp_Disco">0</div>
                  </div>
                  <div class="conjunto">
                    <div class="tipometrica"><span>Atingido</span></div>
                    <div class="metrica" id="met-ati_Disco">0</div>
                  </div>
                </div>
              </div>

              <div class="kpiBox">
                <div class="titulo">
                  <span>Média de Consumo Máximo(%)</span>
                </div>
                <div class="kpiContent">
                  <div class="conjunto">
                    <div class="tipometrica"><span>Esperado</span></div>
                    <div class="metrica" id="met-esp_Disco">0</div>
                  </div>
                  <div class="conjunto">
                    <div class="tipometrica"><span>Atingido</span></div>
                    <div class="metrica" id="met-ati_Disco">0</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="grafDesempenho" id="graf_Disco">
              <canvas id="l"></canvas>
            </div>
          </div>
        </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('myChart');

  const dataValues = [12, 19, 3, 5, 2];

  const maxValue = Math.max(...dataValues);

  const backgroundColor = dataValues.map(value => {
    let alpha = value / maxValue;

    alpha = Math.max(alpha, 0.1);

    return `rgba(254, 73, 78, ${alpha})`;
  });

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Maio'],
      datasets: [{
        label: 'Quantidade de conflitos',
        data: dataValues,
        backgroundColor: backgroundColor,
        borderWidth: 1
      }]
    },
    options: {
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
</html>